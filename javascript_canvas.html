<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<style>
			html, body{ 
				width: 100%;
				height:100%; 
			}
			input{
				position: fixed;
				top:0px;
				left:0px;
			}
			button{
				position: fixed;
				bottom: 0px;
				left: 0px;
			}
		</style>
	</head>
	
	<body>
		<script>
			var countClicks = 0;
			
			//Count clicks in all body
			function clickBody( e ) {
				if (e.toElement.id === 'submitButton')
				return
				
				countClicks++;
				console.log('Clicks = ' + countClicks);
			}
			
			function submitEvent() {
				console.log('Total = ' + countClicks);
				var distance = [];
				var distanceSum = 0;
				
				document.getElementById("response").value = countClicks;
				
				//Verify if is triangle or square			
				if ( countClicks === 4 ){
					if ( savedPageClicks[0][0] === savedPageClicks[3][0] 
					|| savedPageClicks[0][1] === savedPageClicks[3][1]  ){
						console.log('Triangle');
						return false
					}
				} else if ( countClicks === 5 ){
					if ( savedPageClicks[0][0] === savedPageClicks[4][0] 
					|| savedPageClicks[0][1] === savedPageClicks[4][1]){
						console.log('Square');
						return false
					}
				}

				//Get distance point to point
				savedPageClicks.forEach(function (value, i) {
					if( i !== 0 ){
						var x1 = savedPageClicks[i-1][0];
						var y1 = savedPageClicks[i-1][1];
						
						var x2 = savedPageClicks[i][0];
						var y2 = savedPageClicks[i][1];
						
						var a = x1 - x2;
						var b = y1 - y2;
						var c = Math.sqrt( a*a + b*b );
						
						distance.push({
							'd': c,
						});
					}
				});
				
				//Sum distances 	
				distance.forEach(function(item){
				    distanceSum += item.d;
				})
				
				console.log('total distance', distanceSum);
				console.log('Random Shape');
			}
			
			//Set canvas height and width to 100%
			function resizeCanvas() {
				var canvas = document.getElementById('canvas');
				var ctx = canvas.getContext('2d');
				ctx.canvas.width  = window.innerWidth;
				ctx.canvas.height = window.innerHeight;
			}
			
			document.body.addEventListener("click", clickBody)
			document.body.addEventListener('contextmenu', clickBody);
			window.addEventListener("load", resizeCanvas);
		</script>
		
		
		<canvas id="canvas" width="500" height="500"></canvas> 
		<input type='text' id='response' disabled/>	
		<button id="submitButton" onClick=submitEvent();>Submit</button>
		
		<script>
			var clicks = 0;
			var lastClick = [null, null];
			var savedPageClicks = [];
			
			document.getElementById('canvas').addEventListener('click', drawLine, false);
			
			//Drag line point to point
			function drawLine(e) {
				//console.log(e);
			    context = this.getContext('2d');
				
				x = e.pageX - this.offsetLeft;
			    y = e.pageY - this.offsetTop;
			    
			    if(lastClick[0] === null && lastClick[1] === null ){
				    lastClick = [x, y];
				    savedPageClicks[countClicks] = [x, y];
					return false    
			    }
			    
			    context.beginPath();
			    context.lineTo(lastClick[0], lastClick[1]);
			    context.lineTo(x, y);
			        
			    context.strokeStyle = '#000000';
			    context.stroke();
			    
			    lastClick = [x, y];
			    savedPageClicks[countClicks] = [x, y];
			    
			};
		</script>
	</body>
</html> 